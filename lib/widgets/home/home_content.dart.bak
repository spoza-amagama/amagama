// ğŸ“„ lib/widgets/home/home_content.dart
//
// ğŸ  HomeContent (single-function controller)
// ------------------------------------------------------------
// Orchestrates the layout of the home screen and delegates visuals
// to extracted widgets.
//
// External Widgets:
// â€¢ [HomeHeader] â€” logo + sentence + trophies
// â€¢ [HomeCarousel] â€” scrollable sentence cards
// â€¢ [HomeButtons] â€” play, progress, reset
//

import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../../state/game_controller.dart';
import '../../data/index.dart';
import 'home_header.dart';
import 'home_carousel.dart';
import 'home_buttons.dart';

class HomeContent extends StatelessWidget {
  const HomeContent({super.key});

  @override
  Widget build(BuildContext context) {
    final game = context.watch<GameController>();
    final s = sentences[game.currentSentenceIndex];
    final isSmall = MediaQuery.of(context).size.height < 720;

    return LayoutBuilder(
      builder: (context, constraints) {
        return SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 8),
          child: ConstrainedBox(
            constraints: BoxConstraints(minHeight: constraints.maxHeight),
            child: IntrinsicHeight(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  // âœ… No 'game' param â€” HomeHeader only takes sentence + isSmall
                  HomeHeader(
                    sentence: s.text,
                    isSmall: isSmall,
                  ),
                  // âœ… Safe constructor usage
                  const HomeCarousel(),
                  const HomeButtons(),
                ],
              ),
            ),
          ),
        );
      },
    );
  }
}
